# –†–µ–∑—é–º–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ò—Å–∫—Ä–∞ API

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### ‚úÖ Backend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

1. **IskraApiService** (`iskraApiService.ts`)
   - –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
   - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≤—Ö–æ–¥, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ)
   - AI –∑–∞–ø—Ä–æ—Å—ã (Qwen –∏ Claude)
   - –ë–∏–ª–ª–∏–Ω–≥ (—Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞)
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª—è–º–∏

2. **IskraAuthHelper** (`iskraAuthHelper.ts`)
   - –•–µ–ª–ø–µ—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

3. **–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã AI –º–æ–¥–µ–ª–µ–π**
   - `ceillerClaude` - –º–æ–¥–µ–ª–∏ Claude –æ—Ç Anthropic
   - `ceillerQwen` - –º–æ–¥–µ–ª–∏ Qwen –æ—Ç Alibaba
   - –û–±–Ω–æ–≤–ª–µ–Ω—ã endpoints –Ω–∞ –Ω–æ–≤—ã–π API: `https://cli.cryptocatslab.ru`
   - **–¢—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** - –±–µ–∑ —Ç–æ–∫–µ–Ω–∞ –º–æ–¥–µ–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
   - –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –º–æ–¥–µ–ª–∏ —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API

4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ sendLLMMessage**
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–æ–≤—ã–º API –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
   - **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–ª—é—á–∞
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ streaming –¥–ª—è –æ–±–æ–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
   - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ —Ç–æ–∫–µ–Ω–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### ‚úÖ Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

1. **IskraAuth –∫–æ–º–ø–æ–Ω–µ–Ω—Ç**
   - –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
   - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email –∫–æ–¥–æ–º
   - –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

2. **IskraProfile –∫–æ–º–ø–æ–Ω–µ–Ω—Ç**
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
   - –ü–æ–∫–∞–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–∞—Ä–∏—Ñ–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤
   - –ö–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–∞—Ä–∏—Ñ–∞
   - –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞

3. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Settings –∫–æ–º–ø–æ–Ω–µ–Ω—Ç**
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
   - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ñ–æ—Ä–º–æ–π –≤—Ö–æ–¥–∞ –∏ –ø—Ä–æ—Ñ–∏–ª–µ–º
   - –ü—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã API (TODO: –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ IskraApiService)

### ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

1. **backend-api-docs.txt** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
2. **ISKRA_API_INTEGRATION.md** - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
3. **–ò–°–ö–†–ê_–ò–ù–°–¢–†–£–ö–¶–ò–Ø.md** - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
4. **INTEGRATION_SUMMARY.md** - —ç—Ç–æ—Ç —Ñ–∞–π–ª

## –ú–æ–¥–µ–ª–∏

### –ò—Å–∫—Ä–∞ | Anthropic (ceillerClaude)
- claude-haiku-4-5
- claude-sonnet-4-5
- claude-sonnet-4-5-20250929
- claude-sonnet-4-20250514
- claude-3-7-sonnet-20250219

### –ò—Å–∫—Ä–∞ | Alibaba (ceillerQwen)
- qwen3-coder-plus
- qwen3-coder-flash

## –¢–∞—Ä–∏—Ñ—ã

| –¢–∞—Ä–∏—Ñ | –¶–µ–Ω–∞ | –ó–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å | –ú–æ–¥–µ–ª–∏ |
|-------|------|---------------|--------|
| Free | 0‚ÇΩ | 20 | –ë–∞–∑–æ–≤—ã–µ |
| Pro | 990‚ÇΩ/–º–µ—Å | 500 | –í—Å–µ |
| Pro+ | 1990‚ÇΩ/–º–µ—Å | 2000 | –í—Å–µ |

## –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å

### üîß –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è IskraApiService –≤ Settings.tsx**
   - –ó–∞–º–µ–Ω–∏—Ç—å –ø—Ä—è–º—ã–µ fetch –≤—ã–∑–æ–≤—ã –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å dependency injection —á–µ—Ä–µ–∑ VSCode services

2. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –ª–∏–º–∏—Ç–æ–≤**
   - –ü–æ–ª—É—á–∞—Ç—å requestsUsed –∏ requestsTotal –∏–∑ API
   - –û–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π logout –ø—Ä–∏ 401
   - –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

### üî® –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

4. **–£–ª—É—á—à–µ–Ω–∏–µ UI/UX**
   - –ê–Ω–∏–º–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏
   - –¢–æ—Å—Ç—ã –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º

5. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ª–∏–º–∏—Ç–∞—Ö
   - –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

6. **–û–±—Ä–∞–±–æ—Ç–∫–∞ webhook**
   - Endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç –ÆKassa
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã

### üìù –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

7. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**
   - –ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –º–æ–¥–µ–ª—è–º

8. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥–µ–ª–µ–π**
   - –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ—Å–µ—Ç–æ–≤

9. **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
   - –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–∞

## –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### 1. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞
```bash
cd void
npm install
npm run watch
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
1. –û—Ç–∫—Ä–æ–π—Ç–µ Settings
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ email –∏ –≤–≤–µ–¥–∏—Ç–µ –∫–æ–¥
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ—Ñ–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ AI –∑–∞–ø—Ä–æ—Å–æ–≤
1. –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å –∏–∑ –ò—Å–∫—Ä–∞
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞–ø—Ä–æ—Å –≤ —á–∞—Ç
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ—Ç–≤–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ª–∏–º–∏—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–ª–ª–∏–Ω–≥–∞
1. –í –ø—Ä–æ—Ñ–∏–ª–µ –Ω–∞–∂–º–∏—Ç–µ "–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ Pro"
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø–ª–∞—Ç—ã
3. (–ù–µ –∑–∞–≤–µ—Ä—à–∞–π—Ç–µ –æ–ø–ª–∞—Ç—É –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ)

## API Endpoints

–í—Å–µ endpoints –Ω–∞—Ö–æ–¥—è—Ç—Å—è –Ω–∞ `https://cli.cryptocatslab.ru`:

- `POST /auth/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /auth/verify` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∫–æ–¥–∞
- `POST /auth/login` - –≤—Ö–æ–¥
- `POST /auth/resend-code` - –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞
- `POST /ai/qwen/complete` - –∑–∞–ø—Ä–æ—Å –∫ Qwen
- `POST /ai/claude/complete` - –∑–∞–ø—Ä–æ—Å –∫ Claude
- `POST /ai/qwen/stream` - streaming Qwen
- `POST /ai/claude/stream` - streaming Claude
- `POST /billing/create` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
- `GET /billing/status/:id` - —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞
- `GET /ai/models/qwen` - —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π Qwen
- `GET /ai/models/claude` - —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π Claude

## –§–∞–π–ª—ã –¥–ª—è review

### Backend
- `void/src/vs/workbench/contrib/void/common/iskraApiService.ts`
- `void/src/vs/workbench/contrib/void/common/modelCapabilities.ts` (—Å—Ç—Ä–æ–∫–∏ 1155-1296)
- `void/src/vs/workbench/contrib/void/electron-main/llmMessage/sendLLMMessage.impl.ts` (—Å—Ç—Ä–æ–∫–∏ 170-176, 594-700)

### Frontend
- `void/src/vs/workbench/contrib/void/browser/react/src/void-settings-tsx/IskraAuth.tsx`
- `void/src/vs/workbench/contrib/void/browser/react/src/void-settings-tsx/IskraProfile.tsx`
- `void/src/vs/workbench/contrib/void/browser/react/src/void-settings-tsx/Settings.tsx`

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `void/backend-api-docs.txt`
- `void/ISKRA_API_INTEGRATION.md`
- `void/–ò–°–ö–†–ê_–ò–ù–°–¢–†–£–ö–¶–ò–Ø.md`

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: iskra@cryptocatslab.ru
